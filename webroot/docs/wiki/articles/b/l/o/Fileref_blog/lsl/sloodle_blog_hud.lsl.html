<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/favicon.ico"/>
    <title>Fileref:blog/lsl/sloodle blog hud.lsl - SLIS Second Life Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
                      </head>
  <body
    class="ns-0 ns-subject page-Fileref_blog_lsl_sloodle_blog_hud_lsl">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Fileref:blog/lsl/sloodle blog hud.lsl</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From SLIS Second Life Wiki</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This script defines the in-world functionality of the Sloodle Blog HUD (part of the <a href="../../../../articles/s/l/o/Sloodle_Toolbar.html" title="Sloodle Toolbar">Sloodle Toolbar</a>).
</p><p><a href="../../../../articles/f/o/l/File:Folder.gif.html" class="image"><img alt="Folder.gif" src="../../../../images/6/2F/6/6/67/Folder.gif" width="16" height="16" /></a>  <a href="../../../../articles/b/l/o/Fileref:blog/lsl.html" title="Fileref:blog/lsl">(parent)</a> <br />
</p><p><br />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Constants"><span class="tocnumber">1</span> <span class="toctext">Constants</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Variables"><span class="tocnumber">2</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Functions"><span class="tocnumber">3</span> <span class="toctext">Functions</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#sloodle_debug.28string_msg.29"><span class="tocnumber">3.1</span> <span class="toctext">sloodle_debug(string msg)</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#sloodle_handle_command.28string_str.29"><span class="tocnumber">3.2</span> <span class="toctext">sloodle_handle_command(string str)</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#resetScript.28.29"><span class="tocnumber">3.3</span> <span class="toctext">resetScript()</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#resetDisplay.28.29"><span class="tocnumber">3.4</span> <span class="toctext">resetDisplay()</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#resetSettings.28.29"><span class="tocnumber">3.5</span> <span class="toctext">resetSettings()</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#resetWorkingValues.28.29"><span class="tocnumber">3.6</span> <span class="toctext">resetWorkingValues()</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#States"><span class="tocnumber">4</span> <span class="toctext">States</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#default"><span class="tocnumber">4.1</span> <span class="toctext">default</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#error"><span class="tocnumber">4.2</span> <span class="toctext">error</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#authenticating"><span class="tocnumber">4.3</span> <span class="toctext">authenticating</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#ready"><span class="tocnumber">4.4</span> <span class="toctext">ready</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#get_subject"><span class="tocnumber">4.5</span> <span class="toctext">get_subject</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#get_body"><span class="tocnumber">4.6</span> <span class="toctext">get_body</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#confirm"><span class="tocnumber">4.7</span> <span class="toctext">confirm</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#send"><span class="tocnumber">4.8</span> <span class="toctext">send</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h3> <span class="mw-headline" id="Constants"> Constants </span></h3>
<ul><li> CHAT_TIMEOUT  = time to wait for the user to chat some text (in seconds)
</li><li> CONFIRM_TIMEOUT = time to wait for the user to confirm their blog post (in seconds)
</li><li> HTTP_TIMEOUT = time to wait for an HTTP response from Moodle (in seconds)
</li><li> DATASERVER_TIMEOUT = time to wait for a response from the Second Life dataserver (in seconds)
</li></ul>
<ul><li> USER_CHAT_CHANNEL = channel on which to receive chat from the user
</li><li> SLOODLE_CHANNEL_OBJECT_DIALOG = channel on which to communicate with other Sloodle objects/scripts
</li><li> SLOODLE_CHANNEL_OBJECT_LOAD_URL = channel on which to communicate with the URL loading script
</li></ul>
<ul><li> REG_SCRIPT = relative path from the Moodle root to the user registration linker script
</li><li> BLOG_SCRIPT = relative path from the Moodle root to the blog linker script
</li></ul>
<p><br />
</p>
<h3> <span class="mw-headline" id="Variables"> Variables </span></h3>
<ul><li> sloodleserverroot = WWW root of the  Moodle installation
</li><li> sloodlepwd = prim password of the 
</li></ul>
<ul><li> blogsubject = subject line of the blog entry
</li><li> blogbody = body text of the blog entry
</li></ul>
<ul><li> httpblogrequest = UUID of the HTTP request to make a blog entry
</li><li> httpregrequest = UUID of the HTTP request to check/make user  registration
</li></ul>
<ul><li> confirmationmode = TRUE if we are waiting for the user to confirm their entry, or FALSE otherwise
</li><li> updatepending = TRUE if the script should reset and update its configuration at the next opportunity, or FALSE otherwise (note: possibly deprecated!)
</li></ul>
<p><br />
</p>
<h3> <span class="mw-headline" id="Functions"> Functions </span></h3>
<h5> <span class="mw-headline" id="sloodle_debug.28string_msg.29"><a href="http:http://localhost/sl/index.php?title=Sloodle_debug&amp;action=edit&amp;redlink=1" class="new" title="Sloodle debug (page does not exist)">sloodle_debug</a>(string msg)</span></h5>
<p>This standard functions transmits string msg on the debug linker channel to other scripts in the same link. String will be received and outputted by a debug script if present.
</p>
<h5> <span class="mw-headline" id="sloodle_handle_command.28string_str.29"><a href="http:http://localhost/sl/index.php?title=Sloodle_handle_command&amp;action=edit&amp;redlink=1" class="new" title="Sloodle handle command (page does not exist)">sloodle_handle_command</a>(string str)</span></h5>
<p>This customized standard function parses the command string str, and checks for any relevant commands. Executes appropriate actions and/or stores given data where necessary. This will generally be called as a result of a link message received from a notecard setup script. When configuration has been completed by this function, it returns TRUE. Otherwise, FALSE.
</p>
<h5> <span class="mw-headline" id="resetScript.28.29">resetScript()</span></h5>
<p>Resets the text display and the entire script (including all variables).
</p>
<h5> <span class="mw-headline" id="resetDisplay.28.29">resetDisplay()</span></h5>
<p>Clears all text from the surface of the HUD object.
</p>
<h5> <span class="mw-headline" id="resetSettings.28.29">resetSettings()</span></h5>
<p>Resets the basic configuration settings back to empty (server root and prim password).
</p>
<h5> <span class="mw-headline" id="resetWorkingValues.28.29">resetWorkingValues()</span></h5>
<p>Resets the working values related to general blog functionality back to default values. This is always performed after a blog entry has been made, so that no values linger accidentally to the next entry.
</p><p><br />
</p>
<h3> <span class="mw-headline" id="States"> States </span></h3>
<p>All states will reset and return to the default state if a significant change occurs, such as an inventory change, or the item being attached to an avatar.
</p>
<h5> <span class="mw-headline" id="default">default</span></h5>
<p>Destination states: error, authenticating<br />
When in this state, the script is uninitialised, and waiting for configuration. At startup, if the object is not attached as a HUD item, then it moves to the error state. If a linkmessage is received on the object dialog channel, then the link string is given to the "sloodle_handle_command()" function. If configuration is complete, then it moves to the authenticating state.
</p>
<h5> <span class="mw-headline" id="error">error</span></h5>
<p>Destination states: default<br />
Being in this state means that an error has occurred. The script will reset (returning to the default state) if the object is touched, if the inventory changes, or if the object becomes attached to an avatar.
</p>
<h5> <span class="mw-headline" id="authenticating">authenticating</span></h5>
<p>Destination states: error, ready, confirm, default<br />
In this state, the object is checking the user's registration status. If they are registered, then it normally continues straight on to the ready state (unless we are awaiting confirmation for an existing post, in which case it moves to the confirm state). If the user is not registered, then it will provide a URL to the registration page. Thereafter, it will once again either move to ready or confirm states, as appropriate. If an error occurs during registration, then it moves to the error state.
</p>
<h5> <span class="mw-headline" id="ready">ready</span></h5>
<p>Destination states: default, get_subject<br />
In this state, the HUD is ready for the user to start a blog entry. If the "start" button is touched, then the script moves to the get_subject state.
</p>
<h5> <span class="mw-headline" id="get_subject">get_subject</span></h5>
<p>Destination states: default, ready, get_body, confirm<br />
In this state, the script is expecting the subject line of the blog entry to be provided. If a timeout occurs, or if the user cancels, then the script returns to the ready state. When the subject is provided, then it will normally proceed to the get_body state, unless it is in confirmation mode, in which case it returns to the confirm state.
</p>
<h5> <span class="mw-headline" id="get_body">get_body</span></h5>
<p>Destination states: default, ready, confirm<br />
This state expects the body of the blog entry to be provided. If a timeout occurs, or if the user cancels, then the script returns to the ready state. When the body is provided it will proceed to the confirm state.
</p>
<h5> <span class="mw-headline" id="confirm">confirm</span></h5>
<p>Destination states: default, ready, send<br />
This state activates confirmation mode, so that various other operations (such as authentication) can be quickly carried out before returning to confirm the entry. If a timeout occurs, or if the user cancels, then it returns to the ready state. If the user touches the save button to confirm, then it proceeds to the send state. In theory, it could also return directly to the get_subject or get_body states to edit the entry, but this functionality is not yet provided.
</p>
<h5> <span class="mw-headline" id="send">send</span></h5>
<p>Destination states: default, ready, authenticating, confirm<br />
This state attempts to send the user's blog entry to Moodle. If successful, it returns to the ready state. If it fails because the user is not registered, then it jumps back to the authenticating state to register the user. If it fails for any other reason, then it returns to the confirm state, allowing the user to try again or to cancel.
</p><p><br />
</p>
<table style="background-color:white; border:1px solid #0099cc; text-align:center; width:100%;">
<tr>
<th style="background-color:#99d9ea;" colspan="4"> This page is part of the SLOODLE documentation
</th></tr>
<tr>
<td style="border-bottom:solid 1px #dddddd;"> Docs: <a href="../../../../articles/s/l/o/SloodleUserDocs.html" title="SloodleUserDocs" class="mw-redirect">Users</a> | <a href="../../../../articles/s/l/o/SloodleAdminDocs.html" title="SloodleAdminDocs" class="mw-redirect">Administrators</a> | <a href="../../../../articles/s/l/o/SloodleDevDocs.html" title="SloodleDevDocs" class="mw-redirect">Developers</a>
</td></tr>
<tr>
<td style=""> <span style="float:left"><a href="../../../../articles/s/l/o/Sloodle.html" title="Sloodle" class="mw-redirect">Wiki Frontpage</a></span> <span style="float:right"><a rel="nofollow" class="external text" href="http://www.sloodle.org">Sloodle.org</a></span>
</td></tr></table>

<!-- 
NewPP limit report
Preprocessor node count: 81/1000000
Post‐expand include size: 543/2097152 bytes
Template argument size: 31/2097152 bytes
Expensive parser function count: 0/100
-->
</div><div class="printfooter">
</div>
	    <div id="catlinks"><div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://localhost/sl/index.php/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="../../../../articles/s/l/o/Category:SloodleFileRef.html" title="Category:SloodleFileRef">SloodleFileRef</a></li></ul></div></div></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="../../../../articles/b/l/o/Fileref:blog/lsl/sloodle_blog_hud.lsl.html">Page</a></li><li id="ca-talk"
	       class="new"	       ><a href="http:http://localhost/sl/index.php?title=Talk:Fileref:blog/lsl/sloodle_blog_hud.lsl&amp;action=edit&amp;redlink=1">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://localhost/sl/index.php/Fileref:blog/lsl/sloodle_blog_hud.lsl">Latest revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/wiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage-description"><a href="../../../../index.html">Main page</a></li>
	     	      <li id="n-SLOODLE"><a href="../../../../articles/s/l/o/Sloodle.html">SLOODLE</a></li>
	     	      <li id="n-currentevents"><a href="../../../../articles/c/u/r/SLIS_Second_Life_Wiki:Current_events.html">Current events</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help:Contents.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-SEARCH'>
	  <h5>Search</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-TOOLBOX'>
	  <h5>Toolbox</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-LANGUAGES'>
	  <h5>LANGUAGES</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="//www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>		<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 06:51, 29 January 2008 by SLIS Second Life Wiki user <a href="http:http://localhost/sl/index.php?title=User:Peter_Bloomfield&amp;action=edit&amp;redlink=1" class="new" title="User:Peter Bloomfield (page does not exist)">Peter Bloomfield</a>. </li>	  	  <li id="f-about"><a href="../../../../articles/a/b/o/SLIS_Second_Life_Wiki:About.html" title="SLIS Second Life Wiki:About">About SLIS Second Life Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/SLIS_Second_Life_Wiki:General_disclaimer.html" title="SLIS Second Life Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
